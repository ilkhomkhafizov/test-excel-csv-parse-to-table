(this.webpackJsonpnrtb=this.webpackJsonpnrtb||[]).push([[0],{20:function(e,t){},38:function(e,t){},39:function(e,t){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(12),o=n.n(s),u=n(8),i=n(10),l=n(22),b=n(2),j=n(3),d="ADD_COLUMN",O="DELETE_COLUMN",h="ADD_ROW",v="DELETE_ROW",f="UPDATE_CELL",p="SET_TABLE",y="VALIDATE_CELLS",m="PARSE_CELLS",w="LIST_SURVEYS",x=[{id:Math.random(),name:"Post Op"}],C=function(e){switch(e){case"LIST_SURVEYS":return Promise.resolve({response:x});default:return Promise.resolve({})}},g=function(e){return{type:h,after:e}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=void 0===t?"":t,r=e.readOnly,a=void 0===r?null:r,c=e.type,s=void 0===c?"text":c,o={id:Math.random(),type:s,value:n,readOnly:!1};return null!==a&&(o.readOnly=a),o},E={headers:[],rows:[],surveys:[]},S=Object(i.c)({table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var n=t.after,r=k(),a=Object(j.a)(e.headers).slice(0,n+1),c=Object(j.a)(e.headers).slice(n+1),s=[].concat(Object(j.a)(a),[r],Object(j.a)(c)),o=e.rows.map((function(e){var t=k(),r=Object(j.a)(e).slice(0,n+1),a=Object(j.a)(e).slice(n+1);return[].concat(Object(j.a)(r),[t],Object(j.a)(a))}));return Object(b.a)(Object(b.a)({},e),{},{headers:s,rows:o});case O:var u=t.column,i=void 0===u?0:u,l=Object(j.a)(e.headers).slice(0,i),x=Object(j.a)(e.headers).slice(i+1),C=[].concat(Object(j.a)(l),Object(j.a)(x)),g=e.rows.map((function(e){var t=Object(j.a)(e).slice(0,i),n=Object(j.a)(e).slice(i+1);return[].concat(Object(j.a)(t),Object(j.a)(n))}));return Object(b.a)(Object(b.a)({},e),{},{headers:C,rows:g});case h:var S=t.after,N=void 0===S?0:S,L=e.headers.map((function(t){var n="Survey"===t.value,r=n?"survey":"text",a=n&&1===e.surveys.length?e.surveys[0].name:"";return k({type:r,value:a})})),A=[L],D=Object(j.a)(e.rows).slice(0,N),_=Object(j.a)(e.rows).slice(N),R=[].concat(Object(j.a)(D),A,Object(j.a)(_));return Object(b.a)(Object(b.a)({},e),{},{rows:R});case v:var T=t.row,M=Object(j.a)(e.rows).slice(0,T),F=Object(j.a)(e.rows).slice(T+1);return Object(b.a)(Object(b.a)({},e),{},{rows:[].concat(Object(j.a)(M),Object(j.a)(F))});case f:var I=t.row,B=t.column,K=t.value;if("undefined"!==typeof I){var V=JSON.parse(JSON.stringify(e.rows));return V[I][B].value=K,Object(b.a)(Object(b.a)({},e),{},{rows:V})}var J=e.headers.map((function(e,t){return t===B&&(e.value=K),e}));return Object(b.a)(Object(b.a)({},e),{},{headers:J});case p:var P=t.rows,U=P[0],q=P.slice(1),H=U.map((function(e,t){return k({value:e})})),W=(H.find((function(e){return"First Name"===e.value})),H.find((function(e){return"Mobile"===e.value})),H.find((function(e){return"Survey"===e.value})),q.map((function(t){for(var n=e.surveys,r=[],a=0;a<H.length;a++){var c="Survey"===H[a].value?"survey":"text",s=t[a]||(n.length?n[0].name:"");r.push(k({type:c,value:s}))}return r})));return Object(b.a)(Object(b.a)({},e),{},{headers:H,rows:W});case y:var X=e.headers,Y=e.rows,z=Y.map((function(e){return e.map((function(e,t){if(X[t].validate){var n=X[t].validate(e.value),r=Object(b.a)({},e);return r.errors=n?[]:["Number not valid"],r}return e}))}));return Object(b.a)(Object(b.a)({},e),{},{rows:z});case m:var G=e.headers,Q=e.rows,Z=Q.map((function(e){return e.map((function(e,t){if(G[t].parse&&Array.isArray(e.errors)&&0===e.errors.length){var n=JSON.parse(JSON.stringify(e));return n.value=G[t].parse(n.value),n}return e}))}));return Object(b.a)(Object(b.a)({},e),{},{rows:Z});case w:return Object(b.a)(Object(b.a)({},e),{},{surveys:t.surveys});default:return e}}}),N={},L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,A=n(4),D=n(5),_=n(7),R=n(6),T=n(9),M=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(e){var r;return Object(A.a)(this,n),(r=t.call(this,e)).state={value:e.value},r}return Object(D.a)(n,[{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t})}},{key:"onBlur",value:function(e){this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this.props.readOnly?"read-only":"editable";return Object(r.jsx)("div",{className:e,children:Object(r.jsx)("input",{onChange:this.onChange.bind(this),onBlur:this.onBlur.bind(this),value:this.state.value,readOnly:this.props.readOnly,disabled:this.props.readOnly})},this.props.id)}}]),n}(c.a.Component),F=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props.surveys;return Array.isArray(e)&&0!==e.length?Object(r.jsx)("select",{onChange:this.props.onChange,defaultValue:this.props.defaultValue,children:e.map((function(e){return Object(r.jsx)(I,{label:e.name,value:e.name},e.id)}))}):"No surveys created."}}]),n}(c.a.Component),I=function(e){var t=e.label,n=e.value;e.selected;return Object(r.jsx)("option",{value:n,children:t})},B=Object(u.b)((function(e){return{surveys:e.table.surveys}}),null)(F),K=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(e){var r;return Object(A.a)(this,n),(r=t.call(this,e)).state={lastKey:null,mouseOver:!1},r.onTab=r.onTab.bind(Object(T.a)(r)),r.onKeyDown=r.onKeyDown.bind(Object(T.a)(r)),r.onMouseEnter=r.onMouseEnter.bind(Object(T.a)(r)),r.onMouseLeave=r.onMouseLeave.bind(Object(T.a)(r)),r.onChange=r.onChange.bind(Object(T.a)(r)),r}return Object(D.a)(n,[{key:"onChange",value:function(e){var t=e.target.value;this.props.onCellChange&&this.props.onCellChange(this.props.row,this.props.column,t)}},{key:"onTab",value:function(){this.props.isLastCell&&this.props.onAddRow(this.props.row+1)}},{key:"onKeyDown",value:function(e){"Tab"===e.key&&"Shift"!==this.state.lastKey&&this.onTab(),this.setState({lastKey:e.key})}},{key:"onMouseEnter",value:function(e){this.setState({mouseOver:!0})}},{key:"onMouseLeave",value:function(e){this.setState({mouseOver:!1})}},{key:"render",value:function(){var e=this.props,t=e.column,n=e.row,a=e.onAddColumn,c=e.onDeleteColumn,s=(e.onAddRow,e.onDeleteRow),o=e.readOnly,u=e.value,i=e.id,l=e.type,b=e.errors,j=e.isHeader,d=this.state.mouseOver,O=a&&d&&j,h=c&&!o&&d&&j,v=s&&d&&0===t&&!j,f=Array.isArray(b)&&b.length>0;return Object(r.jsxs)("div",{className:"cell "+(f?"has-errors":""),onKeyDown:this.onKeyDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:["survey"===l&&Object(r.jsx)(B,{onChange:this.onChange,defaultValue:u}),"text"===l&&Object(r.jsx)(M,{id:i,readOnly:o,value:u,onChange:this.onChange}),O&&Object(r.jsx)(q,{column:t,onAddColumn:a}),h&&Object(r.jsx)(U,{onDeleteColumn:c,column:t}),v&&Object(r.jsx)(P,{onDeleteRow:s,row:n}),!1]},"cell"+i)}}]),n}(c.a.Component),V={onAddColumn:function(e){return{type:d,after:e}},onAddRow:g,onDeleteColumn:function(e){return{type:O,column:e}},onDeleteRow:function(e){return{type:v,row:e}},onCellChange:function(e,t,n){return{type:f,row:e,column:t,value:n}}},J=Object(u.b)(null,V)(K),P=function(e){var t=e.onDeleteRow,n=e.row;return Object(r.jsx)("div",{className:"delete-row",onClick:function(){return t(n)},children:Object(r.jsx)(W,{})})},U=function(e){var t=e.onDeleteColumn,n=e.column;return Object(r.jsx)("div",{className:"delete-column",onClick:function(){return t(n)},children:Object(r.jsx)(W,{})})},q=function(e){var t=e.onAddColumn,n=e.column;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"add-column add-column-before",onClick:function(){return t(n-1)},children:Object(r.jsx)(H,{})}),Object(r.jsx)("div",{className:"add-column add-column-after",onClick:function(){return t(n)},children:Object(r.jsx)(H,{})})]})},H=function(){return Object(r.jsx)(r.Fragment,{children:"+"})},W=function(){return Object(r.jsx)(r.Fragment,{children:"x"})},X=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"header",children:this.props.headers.map((function(e,t){return Object(a.createElement)(J,Object(b.a)(Object(b.a)({},e),{},{isHeader:!0,key:e.id,column:t}))}))})}}]),n}(c.a.Component),Y=Object(u.b)((function(e){return{headers:e.table.headers}}),null)(X),z=function(e){var t=e.row,n=e.cells,c=e.isLastRow;return Object(r.jsx)("div",{className:"row",children:n.length?n.map((function(e,r){return Object(a.createElement)(J,Object(b.a)(Object(b.a)({},e),{},{column:r,row:t,key:"".concat(t,"-").concat(r),isLastCell:c&&r===n.length-1}))})):"..."})},G=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){var e=this.props.rows;return Object(r.jsx)("div",{className:"body",children:e.length&&e.map((function(t,n){return Object(r.jsx)(z,{cells:t,row:n,isLastRow:n===e.length-1},"row-"+n)}))})}}]),n}(c.a.Component),Q={addRow:g},Z=Object(u.b)((function(e){return{rows:e.table.rows}}),Q)(G),$=n(18),ee=n.n($),te=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(e){var r;return Object(A.a)(this,n),(r=t.call(this,e)).handleFile=r.handleFile.bind(Object(T.a)(r)),r}return Object(D.a)(n,[{key:"handleFile",value:function(e){var t=this,n=new FileReader,r=!!n.readAsBinaryString;n.onload=function(e){var n=e.target.result,a=ee.a.read(n,{type:r?"binary":"array"}),c=a.SheetNames[0],s=a.Sheets[c],o=ee.a.utils.sheet_to_json(s,{header:1});t.props.setTable(o)},r?n.readAsBinaryString(e):n.readAsArrayBuffer(e)}},{key:"render",value:function(){return Object(r.jsx)(ae,{handleFile:this.handleFile})}}]),n}(c.a.Component),ne={setTable:function(e){return function(t){t({type:p,rows:e})}}},re=Object(u.b)(null,ne)(te),ae=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(e){var r;return Object(A.a)(this,n),(r=t.call(this,e)).handleChange=r.handleChange.bind(Object(T.a)(r)),r.fileInput=c.a.createRef(),r}return Object(D.a)(n,[{key:"handleChange",value:function(e){var t=e.target.files;t&&t[0]&&this.props.handleFile(t[0])}},{key:"render",value:function(){var e=this;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("button",{style:{marginLeft:10},onClick:function(){return e.fileInput.current.click()},children:[Object(r.jsx)("i",{className:"fas fa-upload"}),"\xa0 Import File"]}),Object(r.jsx)("input",{ref:this.fileInput,type:"file",hidden:!0,accept:ce,onChange:this.handleChange})]})}}]),n}(c.a.Component),ce=["xlsx","xlsb","xlsm","xls","xml","csv","txt","ods","fods","uos","sylk","dif","dbf","prn","qpw","123","wb*","wq*","html","htm"].map((function(e){return"."+e})).join(","),se=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"btn-bar",children:Object(r.jsx)("div",{children:Object(r.jsx)(re,{})})}),Object(r.jsx)("div",{className:"table-wrapper",children:Object(r.jsxs)("div",{className:"table",children:[Object(r.jsx)(Y,{}),Object(r.jsx)(Z,{})]})})]})}}]),n}(c.a.Component),oe=Object(u.b)(null)(se),ue=function(e){Object(_.a)(n,e);var t=Object(R.a)(n);function n(){return Object(A.a)(this,n),t.apply(this,arguments)}return Object(D.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"app",children:Object(r.jsx)("div",{className:"content",children:Object(r.jsx)(oe,{})})})}}]),n}(a.Component),ie={initialiseTable:function(){return function(e){return C(w).then((function(t){var n=t.response;return e({type:w,surveys:n})})).then((function(){return e(g())}))}}},le=Object(u.b)(null,ie)(ue),be=(n(40),Object(i.e)(S,N,L(Object(i.a)(l.a))));o.a.render(Object(r.jsx)(u.a,{store:be,children:Object(r.jsx)(le,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.672dde3d.chunk.js.map